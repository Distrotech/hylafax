<HTML>
<HEAD>
<TITLE>&lt;DLE&gt;-shielded codes</TITLE>
</HEAD>

<BODY>

<B><FONT SIZE=+2>&lt;DLE&gt;</FONT>-SHIELDED <FONT SIZE=+2>C</FONT>ODES</B>

<HR SIZE=4>

In voice transmit/receive mode, BISYNC protocol should be
applied to the data stream to/from the DCE.  During this period,
commands and responses will be in &lt;DLE&gt; shielded form.  The supported
&lt;DLE&gt; shielded codes are as follows (all &lt;DLE&gt; shield codes are case
sensitive):

<P>
<HR WIDTH=65% ALIGN=right>
<B><FONT SIZE=+2>C</FONT>OMMANDS</B>

<PRE>
  Code          Simple Action Command Description
-------         --------------------------------------------------
 &lt;NUL&gt;          This is something I would recommend
 &lt;DLE&gt;          <CITE>Complies with IS-101</CITE>
   p            Pause Transmit Data State("Immediate Command").
		<CITE>Complies with IS-101</CITE>
   r            Resume Transmit Data State("Immediate Command").
		<CITE>Complies with IS-101</CITE>
 &lt;ETX&gt;          End Transmit Data State ("Stream Command").
		<CITE>Complies with IS-101.</CITE>
 &lt;CAN&gt;          Clear transmit buffer of voice data("Immediate Command").
		<CITE>Complies with IS-101.</CITE>
 &lt;FS&gt;or&lt;DC2&gt;    Concatenate transmit data streams("Stream Command").
		<CITE>Complies with IS-101.</CITE>
 &lt;DC4&gt;          Clear transmit buffer of voice data and return to command
		mode("Immediate Command"). <CITE>Not defined in IS-101.</CITE>
</PRE>

<P>
<HR WIDTH=65% ALIGN=right>
<B><FONT SIZE=+2>R</FONT>ESPONSES</B>

<PRE>
  Code             Event Report Description
-------            --------------------------------------------------
 &lt;DLE&gt;              Two contiguous &lt;DLE&gt;&lt;DLE&gt; codes indicate a single
		    &lt;DLE&gt; in the data stream. Complies with IS-101
 &lt;ETX&gt;              End Data State. Complies with IS-101
   0                DTMF '0' received. Complies with IS-101
   1                DTMF '1' received. Complies with IS-101
   2                DTMF '2' received. Complies with IS-101
   3                DTMF '3' received. Complies with IS-101
   4                DTMF '4' received. Complies with IS-101
   5                DTMF '5' received. Complies with IS-101
   6                DTMF '6' received. Complies with IS-101
   7                DTMF '7' received. Complies with IS-101
   8                DTMF '8' received. Complies with IS-101
   9                DTMF '9' received. Complies with IS-101
   #                DTMF '#' received. Complies with IS-101
   *                DTMF '*' received. Complies with IS-101
   c                T.30 Facsimile Calling Tone. Complies with IS-101
   e                Data Calling tone. Complies with IS-101
   s                "Presumed Hangup"(Silence) Time-out.
		    Silence detected. The DCE has determined that there
		    was no voice energy present at the the beginning of
		    the voice recording session followed by a period of
		    silence greater than the amount of time selected by
		    AT+VSD command. Complies with IS-101
   q                "Presumed End of Message" (Quiet) Time-out.
		    Quiet detected. The DCE has determined that there was
		    voice energy present at the the beginning of the voice
		    recording session followed by a period of silence
		    greater than the amount of time selected by AT+VSD
		    command. Complies with IS-101
   b                Busy tone. Complies with IS-101
   d                Dialtone tone. Complies with IS-101.
</PRE>

<P>
<HR WIDTH=65% ALIGN=right>
<B><FONT SIZE=+2>D</FONT>ESCRIPTION</B>

<P>
<I>DTE to DCE stream</I>. The DCE will filter the data stream from the DTE and
remove all character pairs beginning with &lt;DLE&gt;. The DCE will
recognize &lt;DLE&gt;&lt;DLE&gt; and reinsert a single &lt;DLE&gt; in
its place. The DTE must filter stream data to the DCE, and insert extra
&lt;DLE&gt; characters ahead of &lt;DLE&gt; data.
<P>

<LISTING>
		    +--------------+
		    | TDA=Tx Data  |
		    +--------------+
			   |
		     +------------+
		     | TDA=DLE ?  |
		     +------------+
			   |
		 +--------------------+
	      YES|                    |NO
	  +--------------+     +--------------+
	  | Send two DLE |     | Sned TDA to  |
	  | to UART      |     | UART         |
	  +--------------+     +--------------+
</LISTING>

<I>DCE to DTE stream</I>. The DTE must filter the data stream from the DCE and
remove all character pairs beginning with &lt;DLE&gt;. The DTE must
recognize &lt;DLE&gt;&lt;ETX&gt; as the stream terminator. The DTE must
recognize the &lt;DLE&gt;&lt;DLE&gt; and reinsert a single &lt;DLE&gt;
in its place. The DCE will filter stream data to the DTE, and insert
extra &lt;DLE&gt; characters ahead of &lt;DLE&gt; data.
<P>

<LISTING>
		    +--------------+
		    | RDA=Rcv Data |
		    +--------------+
			   |
		     +------------+
		     | PREVDLE=1? |
		     +------------+
			   |
	      +---------------------------+
	   YES|                           |NO
       +-----------+                 +-----------+
       | PREVDLE=0 |                 | PREVDLE=0 |
       +-----------+                 +-----------+
	      |                            |
       +----------+                  +-----------+
       | RDA=DLE? |                  | RDA=DLE ? |
       +----------+                  +-----------+
	      |                            |
      +-----------+               +-----------------+
   YES|           |NO          YES|                 |NO
+----------+  +-----------+   +-----------+  +-----------------+
| Put RDA  |  | Check for |   | PREVDLE=1 |  | Is it Tx mode ? |
| into Buf |  | Command   |   +-----------+  +-----------------+
+----------+  +-----------+                          |YES
					    +-------------------+
					    | Check if XON/XOFF |
					    +-------------------+
						     |
					      +--------------+
					   YES|              |NO
					 +-----------+  +----------+
					 | Handle    |  | Put RDA  |
					 | Flow Cntl |  | into Buf |
					 +-----------+  +----------+
</LISTING>

<P>
<A HREF="@HTMLPATH@/Modems/ZyXEL/examples.html"><IMG SRC="@HTMLPATH@/icons/next.gif"> Examples of voice mode operation</A>.<BR>
<A HREF="@HTMLPATH@/Modems/ZyXEL/voice.html"><IMG SRC="@HTMLPATH@/icons/back.gif"> ZyXEL Advanced Voice Capability</A>.

<HR>

<ADDRESS>
<A HREF="@HTMLPATH@/sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>.
Last updated $Date$.
</ADDRESS>

</BODY>
</HTML>
