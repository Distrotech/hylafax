<HTML>
<HEAD>
<TITLE>Examples of Voice Mode Operation</TITLE>
</HEAD>

<BODY>

<B><FONT SIZE=+3>E</FONT>XAMPLES OF <FONT SIZE=+2>V</FONT>OICE <FONT SIZE=+2>M</FONT>ODE <FONT SIZE=+2>O</FONT>PERATION</B>

<HR SIZE=4>

<OL>
<LI>Greeting message recording (Put a MIC into dial-up line RJ11 jack)
<LISTING>
    DTE                    DCE           comments
 -------------         -----------    ---------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---      OK

 AT+VSM=1       --->                   Select CELP compression method
		<---      OK

 AT+VLS=8       --->                   Activate external MIC on Line
				       Jack
		<---       VCON

 AT+VRX         --->                   Start to record
		<---       CONNECT
		<---       <DATA>

 AT             --->                   Stop recording
		<---       <DATA>
		<---       <DLE><ETX>
		<---       VCON        Return to commnad state

 AT+VLS=0       ---->                  Deactivate external MIC on Line
				       Jack
		<---       OK

 AT+FCLASS=0                           Return to data mode
		<---       OK

</LISTING>

<LI>Voice file playing via internal speaker
<LISTING>
    DTE                    DCE              comments
 -----------         -----------------  -------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---       OK

 AT+VSM=1       --->                   Select CELP compression method
		<---       OK

 AT+VLS=16      --->                   Activate internal speaker
		<---       VCON

 AT+VTX         --->                   Start to play
		<---       CONNECT
 <DATA>         --->
 <DLE><ETX>     --->
		<---       VCON        Return to commnad state

 AT+VLS=0       --->                   Deactivate internal speaker
		<---       OK

 AT+FCLASS=0                           Return to data mode
		<---       OK
</LISTING>

<LI>Voice file playing via line
<LISTING>

    DTE                    DCE           comments
 -----------          --------------   --------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---       OK
 AT+VSM=1       --->                   Select CELP compression method
		<---       OK

 AT+VLS=2       --->                   Connect to line
		<---       VCON

 AT+VTX         --->                   Start to play
		<---       CONNECT
 <DATA>         --->
 <DLE><ETX>     --->
		<---       VCON        Return to commnad state

 AT+VLS=0       --->                   Deactivate line connection
		<---       OK

 AT+FCLASS=0                           Return to data mode
		<---       OK
</LISTING>

<LI>Answering machine (Voice call)
<LISTING>
    DTE                    DCE           comments
 -----------          --------------   -------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---       OK

 AT+VSM=1       --->                   Select CELP compression method
		<---       OK

 AT+VLS=2       --->                   Connect to line
		<---       VCON

 AT+VTX         --->                   Start to play greeting message
		<---       CONNECT
 <DATA>         --->
 <DLE><ETX>     --->
		<---       VCON        return to commnad state

 AT+VRX         --->                   Start to record
		<---       CONNECT
		<---       <DATA>
		<---       <DLE>b      DCE detects busy tone
			     or               or
			   <DLE>q      long period of quiet

 AT             ---->                  Stop recording
		<---       <DATA>      DCE deliver remaining data
		<---       <DLE><ETX>
		<---       VCON        Return to commnad state

 AT+VLS=0       --->                   Deactivate line connection
		<---       OK

 AT+FCLASS=0                           Return to data mode
		<---       OK
</LISTING>

<LI>Answering machine (Fax call)
<LISTING>

    DTE                    DCE           comments
 -----------          --------------   ------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---      OK

 AT+VSM=1       --->                   Select CELP compression method
		<---      OK

 AT+VLS=2       --->                   Connect to line
		<---       VCON

 AT+VTX         --->                   Start to play greeting message
		<---       CONNECT
 <DATA>         --->
		<---       <DLE>c      T.30 fax calling tone detected
			    or                   or
			   <DLE>5      DTMF digit '5' detected
 <DATA>         --->
 <DLE><ETX>     --->
		<---       VCON        Return to commnad state

 AT+FCLASS=2    --->                   Try to handshake Fax mode
		<---       OK

 ATA            --->
	    Switch to fax mode and answer fax call
			    .
			    .
			    .
</LISTING>

<LI>Answering machine (Data call)
<LISTING>
    DTE                    DCE           comments
 -----------          -------------    --------------------
 AT+FCLASS=8    --->                   Switch to voice mode
		<---       OK

 AT+VSM=?       --->
		      1;CELP;1;0;(9600)
		      2;ADPCM;2;0;(9600)
		      3;ADPCM;3;0;(9600)
		      30;ADPCM;3;0;(9600)
		      4;ADPCM;4;0;(9600)
		<---       OK

 AT+VSM=1       --->                   Select CELP compression method
		<---       OK

 AT+VLS=2       --->                   Connect to line
		<---       VCON

 AT+VTX         --->                   Start to play greeting message
		<---       CONNECT
 <DATA>         --->
 <DLE><ETX>     --->
		<---       VCON        Return to command state

 AT+VRX         --->                   Start to record
		<---       CONNECT
		<---       <DATA>
		<---       <DLE>s      DCE detects silence

 AT             ---->                  Stop recording
		<---       <DATA>      DCE deliver remaining data
		<---       <DLE><ETX>
		<---       VCON        return to command state
	      (DTE delete this silence file)

 AT+FCLASS=0    --->
		<---       OK

 ATA            --->                   Try to handshake data mode
	    Switch to data mode and answer data call
			    .
			    .
			    .
</LISTING>

</OL>

<P>
<A HREF="@HTMLPATH@/Modems/ZyXEL/compression.html"><IMG SRC="@HTMLPATH@/icons/next.gif"> Voice data compression</A>.<BR>
<A HREF="@HTMLPATH@/Modems/ZyXEL/voice.html"><IMG SRC="@HTMLPATH@/icons/back.gif"> ZyXEL Advanced Voice Capability</A>.

<HR>

<ADDRESS>
<A HREF="@HTMLPATH@/sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>.
Last updated $Date$.
</ADDRESS>

</BODY>
</HTML>
