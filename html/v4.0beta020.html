<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>
Changes in HylaFAX v4.0beta020
</TITLE>
</HEAD>

<BODY>

<BASEFONT SIZE=4>
<B><FONT SIZE=+3>H</FONT>YLA<FONT SIZE=+1>FAX</FONT> <FONT SIZE=+2>C</FONT>HANGE <FONT SIZE=+2>I</FONT>NFORMATION</B>
<BASEFONT SIZE=3>

<UL>
<HR SIZE=4 WIDTH=65% ALIGN=left>
<B>Current Version</B>: v4.0beta020<BR>
<B>Previous Version</B>: <A HREF="v4.0beta018.html">v4.0beta018</A><BR>
<B>Master FTP Site</B>: <A HREF="ftp://sgi.com/sgi/fax">sgi.com (192.48.153.1), directory sgi/fax</A><BR>
<HR SIZE=4 WIDTH=65% ALIGN=left>
</UL>

<P>
Note that this is a <STRONG>major new distribution</STRONG> and lots
of things have changed.  Consult the <A HREF="hylafax4.0.html">general overview</A>
for a high-level description of the new functionality provided in the
v4.0 software.

<P>
This document describes the changes made to the software between the
<I>previous</I> and <I>current</I> versions (see above).
If you don't find something listed here, then it was not done in this
timeframe, or it was not considered important enough to be mentioned.
The following information is located here:
<UL>
<LI><A HREF="#configure">Changes in the software configuration</A>
<LI><A HREF="#faxq">Changes to faxq</A>
<LI><A HREF="#faxsend">Changes to faxsend</A>
<LI><A HREF="#pagesend">Changes to pagesend</A>
<LI><A HREF="#faxgetty">Changes to faxgetty</A>
<LI><A HREF="#hfaxd">Changes to hfaxd</A>
<LI><A HREF="#sendfax">Changes to sendfax</A>
<LI><A HREF="#sendpage">Changes to sendpage</A>
<LI><A HREF="#faxmail">Changes to faxmail</A>
<LI><A HREF="#misc">Changes in miscellaneous stuff</A>
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="configure"><B><FONT SIZE=+3>C</FONT>HANGES IN THE SOFTWARE CONFIGURATION:</B></A>

<UL>
<LI><B>configure</B> now recognizes when termiox support is present on
    a system
<LI>a new <TT>CONFIG_SOCKARGLENTYPE</TT> parameter was added to specify
    the type of certain length parameters in socket-related calls that
    are defined to be other than <TT>int</TT> on certain systems
<LI>a bug was fixed that caused relative pathnames to be incorrectly
    changed when gcc was to be used as the compiler
<LI>the file <TT>&lt;osfcn.h&gt;</TT> is now included only when it is
    present on a system (on some systems it is not needed to compile
    the software)
<LI>a new <TT>CONFIG_BADSELECTPROTO</TT> parameter was added to control
    whether or not the <TT>select</TT> system call is assumed to take
    <TT>int*</TT> parameters instead of <TT>fd_set*</TT> parameters
    (this used to be assumed if the software was compiled under HP-UX
    but with HP-UX 10.10 it apparently is no longer true)
<LI>a new <TT>UTMP</TT> parameter was added to control whether the
    software should support the extended <B>utmpx</B> and <B>wtmpx</B>
    files; possible values are: <TT>auto</TT> (configure based on the
    existence of <B>&lt;utmpx.h&gt;</B>), <TT>utmp</TT> (normal usage), or
    <TT>utmpx</TT> (extended usage)
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxq"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXQ:</B></A>

<UL>
<LI><EM><B>faxq</B> is no longer installed setuid fax;
    it is assumed to be started by the root user</EM>
<LI>page chopping now keeps at least one inch of white space at the top of
    each page to insure that there is room for any tag line
    that might be imaged; this works around a limitation in the tag line
    imaging support
<LI>pages truncated by page chopping now include one row of white space
    at the bottom of the chopped page; this should help with fax machines
    that force a margin at the bottom of each printed page
<LI>jobs blocked by concurrent activity to the same destination are
    now queued sorted by their scheduling priority; this fixes a problem
    where jobs to the same destination could be scheduled out of order if
    they blocked due to concurrent activity
<LI>the maximum number of pages permitted in an outbound fax job is
    now checked each time a job is scheduled; this insures that any
    changes in this control are enforced even after a job has been
    prepared for transmission
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxsend"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXSEND:</B></A>

<UL>
<LI>RTS/CTS flow control is now properly controlled on systems that
    require termiox calls
<LI>the communication ID for each job is now reported in the server
    trace log to make it easier to cross-reference the server log
    to individual session logs
<LI>multi-strip TIFF images are now read entirely into memory before
    they are transmitted; this avoids potential timing problems and
    fixes a problem where page chopping that spans multiple strips
    was not being done properly
<LI>a bug was fixed in the session logging support that caused an
    extraneous ``m'' to sometimes appear in messages
<LI>a bug was fixed that caused the <B>pollrcvd</B> script to be
    executed with high/realtime scheduling priority
<LI>session logging now specifies more clearly when ECM is used
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="pagesend"><B><FONT SIZE=+3>C</FONT>HANGES TO PAGESEND:</B></A>

<UL>
<LI>RTS/CTS flow control is now properly controlled on systems that
    require termiox calls
<LI>the communication ID for each job is now included in the server
    trace log to make it easier to cross-reference the server log
    to individual session logs
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxgetty"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXGETTY:</B></A>

<UL>
<LI><EM><B>faxgetty</B> is no longer installed setuid fax;
    it is assumed to be started by the root user</EM>
<LI>RTS/CTS flow control is now properly controlled on systems that
    require termiox calls
<LI>a bug was fixed that caused certain queuer FIFO messages to overflow a
    fixed-size buffer
<LI>a bug was fixed that caused the <B>faxrcvd</B> script to be
    executed with high/realtime scheduling priority
<LI>ECM is now correctly enabled for receiving facsimile
    in Class 2/2.0 modems
<LI>a bug was fixed that caused receive operations to prematurely
    terminate when a Class 2.0 modem reported unacceptable copy quality
    on a received page
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="hfaxd"><B><FONT SIZE=+3>C</FONT>HANGES TO HFAXD:</B></A>

<UL>
<LI>the SNPP <TT>SEND</TT> request no longer requires that a text message
    have been specified
<LI>the SNPP <TT>MESS</TT> request no longer appends a newline character
    to the specified text; to send a message with a newline character in
    it the <TT>DATA</TT> request must be used
<LI>a bug was fixed that caused pathnames to files in the root to be
    incorrectly processed
<LI>the text of the reply to the <TT>ALLO</TT> request was corrected
<LI>repeatedly setting the server in passive mode with the <TT>PASV</TT>
    request no longer causes a new socket to be created each time
<LI>a bug was fixed that caused <B>hfaxd</B> to dump core when asked
    to do certain operations on the default job
    (e.g. ``<TT>JDELE DEFAULT</TT>'')
<LI><B>dev/socksys</B> is now created in the chroot'd spooling area
    as needed; for SCO OS 5 systems that require this device to
    implement <TT>setsockopt</TT>
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="sendfax"><B><FONT SIZE=+3>C</FONT>HANGES TO SENDFAX:</B></A>

<UL>
<LI>a bug was fixed in the at-style time parsing code that caused
    ``now + 120 minutes'' to be incorrectly handled
<LI>a bug was fixed that that caused <B>sendfax</B> to dump core
    on certain systems 
<LI>a bug was fixed that caused certain errors to be reported without
    a useful reason message
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="sendpage"><B><FONT SIZE=+3>C</FONT>HANGES TO SENDPAGE:</B></A>

<UL>
<LI>a new <TT>-n</TT> option was added for sending pages to numeric-only
    paging devices; it suppresses the transmission of a text message
<LI>null text messages are no longer interpreted specially; to suppress
    the transmission of text in a paging request the new <TT>-n</TT>
    option must be used
<LI>a bug was fixed that caused send failures to report a null message
    for the reason
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxmail"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXMAIL:</B></A>

<UL>
<LI>jobs created through direct delivery are now submitted using the
    identity of the user that invokes faxmail unless a new <TT>-u</TT>
    option is specified on the command line
<LI><B>faxmail</B> now uses any Subject line to set the Regarding
    field in an automatically generated cover page (if not otherwise
    specified)
<LI><B>faxmail</B> now uses any To line to set the Receipient
    field in an automatically generated cover page (if not otherwise
    specified)
<LI>a bug was fixed that caused the default boundary marker to be
    erroneously matched
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="misc"><B><FONT SIZE=+3>C</FONT>HANGES IN MISCELLANEOUS STUFF:</B></A>

<UL>
<LI><EM><B>faxqclean</B> is no longer installed setuid fax;
    it is assumed to be started by the root user</EM>
<LI><B>faxabort</B> and <B>faxanswer</B> now require that
   a modem be specified on the command line
<LI>a bug was fixed in the domain name mapping logic in <B>xferstats</B>
<LI>the ZyXEL 2864 prototype configuration file now also matches the
    ZyXEL Omni 288S modem which has a compatible command set
<LI><B>faxconfig</B> now properly recognizes when a trailing argument is
    missing from the command line
<LI><B>faxstate</B> no longer dumps core when invoked without a <TT>-s</TT>
    option
<LI>the value of the symbolic link created <B>tiff2fax</B> when no
    document conversion is required was corrected
<LI><B>tiff2fax</B> now removes the target file before creating a symbolic
    link to avoid problems with systems that do not automatically clobber
    the target when it exists (and there is no controlling tty to prompt
    for confirmation)
<LI><B>faxsetup</B> now arranges for <B>probemodem</B> and <B>faxaddmodem</B>
    to use the <B>ondelay</B> program when probing the tty port to find out
    the set of valid speeds; this fixes a problem found on certain
    NCR systems
<LI>the advise given by <B>faxsetup</B> when encountering a COFF
    <B>ps2fax.exe</B> executable on an IRIX 6.2 system has been corrected
<LI>a workaround was added to the string handling support to avoid
    an ANSI C compilation botch in HP-UX 
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="html"><B><FONT SIZE=+3>C</FONT>HANGES IN THE HTML DOCUMENTATION:</B></A>

<UL>
<LI>the documentation has been significantly reworked and updated
<LI>more gratuitous images were added to the documentation
</UL>

<!--FOOTER-->

<A HREF="toc.html"><IMG SRC="icons/back.gif"></A> HylaFAX table
of contents.<BR>

<HR>

<ADDRESS>
<A HREF="sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>
Last updated $Date$.
</ADDRESS>

</BODY>
</HTML>
