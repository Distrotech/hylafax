<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<TITLE>
Changes in HylaFAX v4.0beta011
</TITLE>
</HEAD>

<BODY>

<BASEFONT SIZE=4>
<B><FONT SIZE=+3>H</FONT>YLA<FONT SIZE=+1>FAX</FONT> <FONT SIZE=+2>C</FONT>HANGE <FONT SIZE=+2>I</FONT>NFORMATION</B>
<BASEFONT SIZE=3>

<UL>
<HR SIZE=4 WIDTH=65% ALIGN=left>
<B>Current Version</B>: v4.0beta011<BR>
<B>Previous Version</B>: <A HREF="v4.0beta010.html">v4.0beta010</A><BR>
<B>Master FTP Site</B>: <A HREF="ftp://sgi.com/sgi/fax">sgi.com (192.48.153.1), directory sgi/fax</A><BR>
<HR SIZE=4 WIDTH=65% ALIGN=left>
</UL>

<P>
Note that this is a <STRONG>major new distribution</STRONG> and lots
of things have changed.  Consult the <A HREF="hylafax4.0.html">general overview</A>
for a high-level description of the new functionality provided in the
v4.0 software.

<P>
This document describes the changes made to the software between the
<I>previous</I> and <I>current</I> versions (see above).
If you don't find something listed here, then it was not done in this
timeframe, or it was not considered important enough to be mentioned.
The following information is located here:
<UL>
<LI><A HREF="#general">General changes</A>
<LI><A HREF="#configure">Changes in the software configuration</A>
<LI><A HREF="#hfaxd">Changes to hfaxd</A>
<LI><A HREF="#sendpage">Changes to sendpage</A>
<LI><A HREF="#faxaddmodem">Changes to faxaddmodem</A>
<LI><A HREF="#faxmail">Changes to faxmail</A>
<LI><A HREF="#docs">Changes in the documentation</A>
<LI><A HREF="#misc">Changes in miscellaneous stuff</A>
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="general"><B><FONT SIZE=+3>G</FONT>ENERAL CHANGES:</B></A>

<UL>
<LI>server machines must now be setup for use with the
   <B>faxsetup</B> command
<LI>each inbound or outbound call
   handled by HylaFAX is now given a unique number termed a
   <I>communication identifier</I>; session logs are now written
   to separate files in the <B>log</B> directory whose names are
   based on the assigned communication identifier
<LI>the format of the accounting file <B>etc/xferlog</B> has
   changed to include the communication identifier and the client-specified
   job tag identifier (for outbound calls); the latter is useful for
   sites that use job tags for accounting purposes
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="configure"><B><FONT SIZE=+3>C</FONT>HANGES IN THE SOFTWARE CONFIGURATION:</B></A>

<UL>
<LI><B>configure</B> now emits the correct definition for
    <TT>CONFIG_BADEXECVEPROTO</TT> for AIX systems
<LI>the check for support for memory-mapped files was corrected
<LI>various configuration parameters now need an explicit ``auto'' 
    setting to get <B>configure</B> to select a value based on the
    build environment
<LI>fewer files are dependent on the build environment because of the
    addition of the <B>faxsetup</B> command and the work it does to
    configure the software according to the target system
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxq"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXQ:</B></A>

<UL>
<LI>a new flag bit was added for tracing error messages from the TIFF library
<LI>the calling sequence for the <B>notify</B> script was changed
<LI>a new <TT>-m</TT> option is now passed to all document converters
    to indicate the maximum number of pages that should be permitted
    in a converted document
<LI><B>faxq</B> now returns (more) informative error messages
    when it recognizes that a document conversion failed but the
    converter program did not exit with an error
<LI><B>faxq</B> no longer assumes that document conversions overwrite
    the output file it creates
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxsend"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXSEND:</B></A>

<UL>
<LI>the calling sequence for the <B>pollrcvd</B> script was changed
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxgetty"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXGETTY:</B></A>

<UL>
<LI>a bug was fixed in the Caller-ID support that caused information
    to be discarded in certain cases
<LI>the calling sequence for the <B>faxrcvd</B> script was changed
<LI>a bug was fixed in the Group 3 decoder's recognition of EOL codes
    that follow an error in the input stream
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="hfaxd"><B><FONT SIZE=+3>C</FONT>HANGES TO HFAXD:</B></A>

<UL>
<LI>the parsing of time values was made more robust
<LI>the handling of absolute time values (e.g. <TT>SENDTIME</TT>) was corrected
<LI><TT>RETRYTIME</TT> values are now interpreted as minutes and seconds
   rather than hours and minutes
<LI><TT>SENDTIME</TT> values are now always interpreted relative to GMT
<LI><B>hfaxd</B> is now installed setuid root so that it functions
   correctly when started from <B>inetd</B>
<LI>the SNPP support now sets the job <TT>RETRYTIME</TT> based on the
   service level; this corrects a problem where a job could time out
   before multiple attempts were made to complete the transmission
<LI>a <TT>RetryTimeMap</TT> configuration parameter was added to control
   the SNPP service level-to-<TT>RETRYTIME</TT> mapping
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxaddmodem"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXADDMODEM:</B></A>

<UL>
<LI><B>faxsetup</B> must be run before configuring modems; <B>faxaddmodem</B>
    no longer does any of the basic system verification and setup work
    that it used to (e.g. creating a ``fax'' user)
<LI>system-specific support for communicating with modems is now taken
    from the file <B>etc/setup.modem</B> created by <B>faxsetup</B>
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="faxmail"><B><FONT SIZE=+3>C</FONT>HANGES TO FAXMAIL:</B></A>

<UL>
<LI>configuration files are now read
<LI>the meta-header handling has been improved; it is now simpler to
    specify the set of headers to keep from the envelope
<LI>headers are now matched in a case-insensitive manner
<LI>meta-headers were added to control the fonts used to format the envelope
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="docs"><B><FONT SIZE=+3>C</FONT>HANGES IN THE DOCUMENTATION:</B></A>

<UL>
<LI>the HTML documentation has been reorganized so that it can be
   viewed in-place in the source filesystem hierarchy
<LI>all the documentation has been updated to reflect the current state
   of the software
</UL>

<P><HR WIDTH=65% ALIGN=right>

<A NAME="misc"><B><FONT SIZE=+3>C</FONT>HANGES IN MISCELLANEOUS STUFF:</B></A>

<UL>
<LI>a bug was fixed in memory-mapped file handling used for facsimile
    job submissions
<LI>a bug was fixed in the SNPP client code for transmitting
    a <TT>HOLD</TT> time
<LI>a bug was fixed in the fax client code for transmitting
    a <TT>SENDTIME</TT> value
<LI>the System V script for starting the HylaFAX servers at boot time
    is now dependent on the work of <B>faxsetup</B>
<LI><B>probemodem</B> is now dependent on the work of <B>faxsetup</B>
<LI><B>faxcron</B> is now dependent on the work of <B>faxsetup</B>
<LI><B>faxcron</B> was updated to understand the new session log scheme
<LI><B>faxmodem</B> now accepts full device pathnames for consistency
    with other similar programs
<LI>the <B>notify</B> script has been updated to handle the new
    session log scheme and to return transcripts for more errors
<LI><B>xferstats</B> has new options for collating statistics
    by job tag and by modem device
<LI><B>textfmt</B> now reads configuration files
</UL>

<!--FOOTER-->

<A HREF="toc.html"><IMG SRC="icons/back.gif"></A> HylaFAX table
of contents.<BR>

<HR>

<ADDRESS>
<A HREF="sam.html">Sam Leffler</A> / <A HREF="mailto:sam@engr.sgi.com">sam@engr.sgi.com</A>
Last updated $Date$.
</ADDRESS>

</BODY>
</HTML>
